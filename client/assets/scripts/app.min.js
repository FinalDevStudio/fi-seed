!function(n){"use strict";function e(n){return document.querySelector('meta[name="'+n+'"]').getAttribute("content")}var t=n.angular;n.app={environment:e("environment"),version:e("version"),title:e("title"),name:e("name")};var a=["ngAnimate","ngRoute","ngAria","pascalprecht.translate","angular-loading-bar","ngAuthorize","ngSession","ngFlashes"];t.module("App",a)}(window);
!function(t){"use strict";var r=t.angular;r.module("App").factory("$consts",["$http",function(t){function a(t){if(r.isObject(t.data))for(var a in t.data)t.data[a.toLowerCase()]=t.data[a],delete t.data[a];return t}var n={cache:!0,params:{}};return{config:function(t){if(!t||!r.isObject(t))throw new Error("Config must be a valid $http config object.");t.params||(t.params={}),n=t},get:function(e){if(!e)throw new Error("Parameter cannot be empty!");if(!r.isArray(e)&&!r.isString(e))throw new Error("Wrong parameter type! Must be a String or an Array.");return n.params.consts=e,t.get("/api/consts",n).then(a,r.noop)}}}])}(window);
!function(r){"use strict";r.angular.module("App").controller("Pages:Error",["$scope","$location",function(r,o){r.err=o.search().err}])}(window);
!function(o){"use strict";o.angular.module("App").controller("Pages:Forbidden",["$scope","$location",function(o,r){o.err=r.search().err}])}(window);
!function(o){"use strict";o.angular.module("App").controller("Pages:Home",["$scope","$log",function(o,e){e.log("The home controller has been initialized!")}])}(window);
!function(o){"use strict";o.angular.module("App").controller("Pages:Lost",["$scope","$location",function(o,n){o.url=n.search().url}])}(window);
!function(e){"use strict";e.angular.module("App").controller("Pages:Theme",["$scope","ngFlashes",function(e,n){e.$flash=n}])}(window);
!function(S){"use strict";S.angular.module("App").controller("Users:SignIn",["$scope","$http","$location","ngSession","ngFlashes",function(S,n,t,E,i){function s(){i.success("USERS.SIGN_IN.FLASHES.SUCCESS.TITLE","USERS.SIGN_IN.FLASHES.SUCCESS.MESSAGE"),E.get("redirect")?(t.path(E.get("redirect")),E.set("redirect",null)):t.path("/")}function e(S){401===S.status?i.warning("USERS.SIGN_IN.FLASHES.WARNING.TITLE","USERS.SIGN_IN.FLASHES.WARNING.MESSAGE"):i.danger("USERS.SIGN_IN.FLASHES.DANGER.TITLE","USERS.SIGN_IN.FLASHES.DANGER.MESSAGE")}function I(){S.submitting=!1}S.submitting=!1,S.submit=function(){S.submitting=!0,E.signIn(S.data).then(s,e).finally(I)}}])}(window);
!function(S){"use strict";S.angular.module("App").controller("Users:SignUp",["$scope","$http","$location","ngSession","ngFlashes","consts",function(S,E,n,t,s,U){function i(){s.success("USERS.SIGN_UP.FLASHES.SUCCESS.TITLE","USERS.SIGN_UP.FLASHES.SUCCESS.MESSAGE"),n.path("/")}function A(){s.danger("USERS.SIGN_UP.FLASHES.ERROR.TITLE","USERS.SIGN_UP.FLASHES.ERROR.MESSAGE"),S.submitting=!1}function u(){return t.signIn(S.data).then(i,A)}function I(E){409===E.status?s.warning("USERS.SIGN_UP.FLASHES.DUPLICATED.TITLE","USERS.SIGN_UP.FLASHES.DUPLICATED.MESSAGE"):400===E.status?s.warning("USERS.SIGN_UP.FLASHES.WARNING.TITLE","USERS.SIGN_UP.FLASHES.WARNING.MESSAGE"):s.danger("USERS.SIGN_UP.FLASHES.DANGER.TITLE","USERS.SIGN_UP.FLASHES.DANGER.MESSAGE"),S.submitting=!1}S.consts=U.data,S.submitting=!1,S.submit=function(){S.submitting=!0,E.post("/api/users",S.data).then(u,I)}}])}(window);
!function(a){"use strict";a.angular.module("App").directive("progressBar",function(){return{link:function(a,r,i){var e=parseFloat(i.ariaValuenow)-parseFloat(i.ariaValuemin);e=100*e/parseFloat(i.ariaValuemax),r.css({width:e+"%"})},restrict:"C"}})}(window);
!function(t){"use strict";var e={templateUrl:"/assets/templates/main/footer.html",restrict:"A",scope:{}};t.angular.module("App").directive("mainFooter",function(){return e})}(window);
!function(e){"use strict";var a=e.angular;a.module("App").directive("mainNavbar",["$location","$timeout",function(n,t){return{templateUrl:"/assets/templates/main/navbar.html",link:function(o){function l(e){o.folded=e,t()}var s=0,c=60,i=60,r=a.element(document.querySelector(".navbar-collapse"));e.addEventListener("scroll",function(){var a=e.pageYOffset;a>i?Math.abs(a-s)>c&&(a<s?o.folded&&l(!1):o.folded||l(!0),s=a):o.folded&&l(!1)},!1),o.$on("$routeChangeSuccess",function(){o.location=n.path()}),o.$on("$routeChangeStart",function(){r.addClass("collapse"),o.location=""}),o.toggleCollapse=function(){r.hasClass("collapse")?r.removeClass("collapse"):r.addClass("collapse")},o.location=n.path(),o.signingOut=!1,o.signingIn=!1,o.folded=!1},restrict:"A",scope:{}}}])}(window);
!function(e){"use strict";var t={templateUrl:"/assets/templates/pages/home.html",controller:"Pages:Home"},s={templateUrl:"/assets/templates/pages/theme.html",controller:"Pages:Theme"},r={templateUrl:"/assets/templates/pages/lost.html",controller:"Pages:Lost"},l={templateUrl:"/assets/templates/pages/error.html",controller:"Pages:Error"},o={templateUrl:"/assets/templates/pages/forbidden.html",controller:"Pages:Forbidden"},a={redirectTo:"/lost"};e.angular.module("App").config(["$routeProvider",function(e){e.when("/",t).when("/forbidden",o).when("/error",l).when("/theme",s).when("/lost",r).otherwise(a)}])}(window);
!function(s){"use strict";var n={templateUrl:"/assets/templates/users/sign-up.html",controller:"Users:SignUp",resolve:{consts:["$consts",function(s){return s.get(["roles","genders"])}]}},e={templateUrl:"/assets/templates/users/sign-in.html",controller:"Users:SignIn"},t={resolve:{signOut:["$location","$window","ngSession","ngFlashes",function(s,n,e,t){return e.signOut().then(function(){t.success("USERS.SIGN_OUT.FLASHES.SUCCESS.TITLE","USERS.SIGN_OUT.FLASHES.SUCCESS.MESSAGE"),s.path("/users/sign-in")},function(){t.danger("USERS.SIGN_OUT.FLASHES.ERROR.TITLE","USERS.SIGN_OUT.FLASHES.ERROR.MESSAGE"),n.history.back()})}]}};s.angular.module("App").config(["$routeProvider",function(s){s.when("/users/sign-up",n).when("/users/sign-out",t).when("/users/sign-in",e)}])}(window);
!function(n){"use strict";function e(n,e,i,r,t,a){var o=n.defer();return t.update().then(function(){return r.authorize(e.current.$$route,t.user("roles"))}).then(function(n){if(n)return o.resolve();a.warning("SESSION.UNAUTHORIZED")}).catch(function(){return t.signOut().finally(function(){i.path("/users/sign-in"),a.danger("SESSION.ERROR")})}),o.promise}var i=n.angular,r=n.is;i.module("App").config(["cfpLoadingBarProvider",function(n){n.includeSpinner=!1}]).config(["ngAuthorizeProvider",function(n){n.configure({forbiddenPath:"/forbidden",signInPath:"/users/sign-in",authorizer:["$q","$route","$location","ngAuthorize","ngSession","ngFlashes",e]})}]).config(["$translateProvider",function(n){n.useStaticFilesLoader({files:[{prefix:"/assets/locales/",suffix:".json"}]}),n.useSanitizeValueStrategy("escape"),n.preferredLanguage("es").fallbackLanguage("es")}]).config(["$locationProvider",function(n){n.html5Mode(!0)}]).config(["ngFlashesProvider",function(n){n.configure({templateUrl:"/assets/templates/main/flash.html"})}]).config(["$animateProvider",function(n){n.classNameFilter(/animate/)}]).config(["$httpProvider",function(n){n.defaults.xsrfHeaderName="csrf-token",n.defaults.xsrfCookieName="CSRF"}]).run(["$rootScope","$translate",function(e,i){e.app=n.app;var t=navigator&&navigator.language;r.string(t)&&t.length&&(t=t.substring(0,2)),i.use(t)}])}(window);